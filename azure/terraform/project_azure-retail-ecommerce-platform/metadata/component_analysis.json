{
  "original_components": [
    {
      "name": "web_application_tier",
      "service_type": "azure_app_service",
      "purpose": "Hosts the multi-tenant web application with tenant routing and isolation",
      "dependencies": [
        "application_database",
        "redis_cache",
        "blob_storage"
      ],
      "security_considerations": [
        "tenant_data_isolation",
        "ssl_termination",
        "ddos_protection",
        "input_validation"
      ],
      "configuration_complexity": "high"
    },
    {
      "name": "application_database",
      "service_type": "azure_sql_database",
      "purpose": "Stores tenant-isolated product catalogs, orders, customers, and inventory data",
      "dependencies": [],
      "security_considerations": [
        "encryption_at_rest",
        "connection_encryption",
        "tenant_schema_isolation",
        "backup_encryption"
      ],
      "configuration_complexity": "medium"
    },
    {
      "name": "redis_cache",
      "service_type": "azure_cache_for_redis",
      "purpose": "Caches product data, session state, and frequently accessed tenant configurations",
      "dependencies": [],
      "security_considerations": [
        "access_keys_rotation",
        "network_isolation",
        "ssl_encryption"
      ],
      "configuration_complexity": "low"
    },
    {
      "name": "blob_storage",
      "service_type": "azure_storage_account",
      "purpose": "Stores product images, tenant assets, and order documents with tenant-based containers",
      "dependencies": [],
      "security_considerations": [
        "container_access_policies",
        "blob_encryption",
        "tenant_data_separation",
        "cdn_security"
      ],
      "configuration_complexity": "medium"
    },
    {
      "name": "cdn_distribution",
      "service_type": "azure_cdn",
      "purpose": "Delivers static assets and product images globally with tenant-specific caching rules",
      "dependencies": [
        "blob_storage"
      ],
      "security_considerations": [
        "origin_access_control",
        "custom_domain_ssl",
        "geo_blocking"
      ],
      "configuration_complexity": "medium"
    },
    {
      "name": "application_gateway",
      "service_type": "azure_application_gateway",
      "purpose": "Provides load balancing, SSL termination, and tenant routing based on subdomain",
      "dependencies": [
        "web_application_tier"
      ],
      "security_considerations": [
        "waf_rules",
        "ssl_certificate_management",
        "tenant_routing_security"
      ],
      "configuration_complexity": "high"
    }
  ],
  "implemented_components": [
    {
      "name": "web_application_tier",
      "service_type": "azure_app_service",
      "implementation_confidence": 1.0
    },
    {
      "name": "application_database",
      "service_type": "azure_sql_database",
      "implementation_confidence": 0.6
    },
    {
      "name": "redis_cache",
      "service_type": "azure_cache_for_redis",
      "implementation_confidence": 1.0
    },
    {
      "name": "blob_storage",
      "service_type": "azure_storage_account",
      "implementation_confidence": 1.0
    },
    {
      "name": "cdn_distribution",
      "service_type": "azure_cdn",
      "implementation_confidence": 1.0
    },
    {
      "name": "application_gateway",
      "service_type": "azure_application_gateway",
      "implementation_confidence": 1.0
    }
  ],
  "missing_components": [],
  "implementation_coverage": 1.0,
  "file_analysis": {
    "main.tf": {
      "filename": "main.tf",
      "line_count": 391,
      "resource_count": 23,
      "resources_found": [
        {
          "type": "azurerm_resource_group",
          "name": "main"
        },
        {
          "type": "azurerm_virtual_network",
          "name": "main"
        },
        {
          "type": "azurerm_subnet",
          "name": "public"
        },
        {
          "type": "azurerm_subnet",
          "name": "private"
        },
        {
          "type": "azurerm_subnet",
          "name": "data"
        },
        {
          "type": "azurerm_network_security_group",
          "name": "public"
        },
        {
          "type": "azurerm_network_security_group",
          "name": "private"
        },
        {
          "type": "azurerm_storage_account",
          "name": "main"
        },
        {
          "type": "azurerm_storage_container",
          "name": "product_images"
        },
        {
          "type": "azurerm_mssql_server",
          "name": "main"
        },
        {
          "type": "azurerm_mssql_database",
          "name": "main"
        },
        {
          "type": "azurerm_mssql_server_security_alert_policy",
          "name": "main"
        },
        {
          "type": "azurerm_redis_cache",
          "name": "main"
        },
        {
          "type": "azurerm_service_plan",
          "name": "main"
        },
        {
          "type": "azurerm_linux_web_app",
          "name": "main"
        },
        {
          "type": "azurerm_public_ip",
          "name": "appgw"
        },
        {
          "type": "azurerm_application_gateway",
          "name": "main"
        },
        {
          "type": "azurerm_cdn_profile",
          "name": "main"
        },
        {
          "type": "azurerm_cdn_endpoint",
          "name": "main"
        },
        {
          "type": "azurerm_network_watcher",
          "name": "main"
        },
        {
          "type": "azurerm_storage_account",
          "name": "logs"
        },
        {
          "type": "azurerm_network_watcher_flow_log",
          "name": "main"
        },
        {
          "type": "azurerm_log_analytics_workspace",
          "name": "main"
        }
      ],
      "has_variables": false,
      "has_outputs": false,
      "has_provider_config": true
    },
    "variables.tf": {
      "filename": "variables.tf",
      "line_count": 39,
      "resource_count": 0,
      "resources_found": [],
      "has_variables": true,
      "has_outputs": false,
      "has_provider_config": false
    },
    "outputs.tf": {
      "filename": "outputs.tf",
      "line_count": 49,
      "resource_count": 0,
      "resources_found": [],
      "has_variables": false,
      "has_outputs": true,
      "has_provider_config": false
    },
    "README.md": {
      "filename": "README.md",
      "line_count": 198,
      "resource_count": 0,
      "resources_found": [],
      "has_variables": false,
      "has_outputs": false,
      "has_provider_config": false
    }
  },
  "recommendations": []
}