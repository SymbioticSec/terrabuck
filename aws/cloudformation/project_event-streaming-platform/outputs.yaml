# CloudFormation Outputs
# These outputs provide important resource information for integration and monitoring

Outputs:
  # Network Outputs
  VPCId:
    Description: VPC ID for the event streaming platform
    Value: !Ref EventStreamingVPC
    Export:
      Name: !Sub "${ProjectName}-vpc-id"

  PublicSubnetId:
    Description: Public subnet ID for API Gateway
    Value: !Ref PublicSubnet
    Export:
      Name: !Sub "${ProjectName}-public-subnet-id"

  PrivateComputeSubnetId:
    Description: Private compute subnet ID for Lambda functions
    Value: !Ref PrivateComputeSubnet
    Export:
      Name: !Sub "${ProjectName}-private-compute-subnet-id"

  PrivateDataSubnetId:
    Description: Private data subnet ID for databases
    Value: !Ref PrivateDataSubnet
    Export:
      Name: !Sub "${ProjectName}-private-data-subnet-id"

  # API Gateway Outputs
  APIGatewayId:
    Description: API Gateway ID for event ingestion
    Value: !Ref EventIngestionAPI
    Export:
      Name: !Sub "${ProjectName}-api-id"

  APIGatewayURL:
    Description: API Gateway endpoint URL for event ingestion
    Value: !Sub "https://${EventIngestionAPI}.execute-api.${AWS::Region}.amazonaws.com/prod"
    Export:
      Name: !Sub "${ProjectName}-api-url"

  # Kinesis Outputs
  KinesisStreamName:
    Description: Kinesis stream name for event processing
    Value: !Ref EventDataStream
    Export:
      Name: !Sub "${ProjectName}-kinesis-stream"

  KinesisStreamArn:
    Description: Kinesis stream ARN for event processing
    Value: !GetAtt EventDataStream.Arn
    Export:
      Name: !Sub "${ProjectName}-kinesis-stream-arn"

  # S3 Outputs
  S3BucketName:
    Description: S3 bucket name for raw event archive
    Value: !Ref RawEventArchiveBucket
    Export:
      Name: !Sub "${ProjectName}-s3-bucket"

  S3BucketArn:
    Description: S3 bucket ARN for raw event archive
    Value: !GetAtt RawEventArchiveBucket.Arn
    Export:
      Name: !Sub "${ProjectName}-s3-bucket-arn"

  # Lambda Outputs
  LambdaFunctionName:
    Description: Lambda function name for real-time analytics
    Value: !Ref RealTimeAnalyticsFunction
    Export:
      Name: !Sub "${ProjectName}-lambda-function"

  LambdaFunctionArn:
    Description: Lambda function ARN for real-time analytics
    Value: !GetAtt RealTimeAnalyticsFunction.Arn
    Export:
      Name: !Sub "${ProjectName}-lambda-function-arn"

  # Redis Outputs
  RedisEndpoint:
    Description: Redis cluster endpoint for metrics caching
    Value: !GetAtt RedisCluster.RedisEndpoint.Address
    Export:
      Name: !Sub "${ProjectName}-redis-endpoint"

  RedisPort:
    Description: Redis cluster port
    Value: !GetAtt RedisCluster.RedisEndpoint.Port
    Export:
      Name: !Sub "${ProjectName}-redis-port"

  # Database Outputs
  DatabaseEndpoint:
    Description: PostgreSQL database endpoint
    Value: !GetAtt PostgreSQLDatabase.Endpoint.Address
    Export:
      Name: !Sub "${ProjectName}-db-endpoint"

  DatabasePort:
    Description: PostgreSQL database port
    Value: !GetAtt PostgreSQLDatabase.Endpoint.Port
    Export:
      Name: !Sub "${ProjectName}-db-port"

  # Security Group Outputs
  LambdaSecurityGroupId:
    Description: Security group ID for Lambda functions
    Value: !Ref LambdaSecurityGroup
    Export:
      Name: !Sub "${ProjectName}-lambda-sg-id"

  RedisSecurityGroupId:
    Description: Security group ID for Redis cluster
    Value: !Ref RedisSecurityGroup
    Export:
      Name: !Sub "${ProjectName}-redis-sg-id"

  DatabaseSecurityGroupId:
    Description: Security group ID for PostgreSQL database
    Value: !Ref DatabaseSecurityGroup
    Export:
      Name: !Sub "${ProjectName}-db-sg-id"